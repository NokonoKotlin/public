<!doctype html>
<html lang="ja">
    <link rel="stylesheet" href="../../css/style.css">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    </script>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" }},
        tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
        },
        "HTML-CSS": { matchFontHeight: false },
        displayAlign: "left",
        displayIndent: "2em"
    });
    </script>
    <title>Problem_1</title>
        

    </head>




    <body>
        
         <!--軽くコメント-->
        <nav id="INNER">
            <h_middle style = "text-align: left;"><a href="../../index.html">前のページ</a> </h_middle>
            <section class = "INTRODUCTION">
                
                <h_big>   
                    作問(1)<br></h_big>


            </section>


            <section class = "EXPLANATION">
                <br>先日書いたSplay木についていろいろ考えているときに思いついたクエリ処理を問題にしてみました。
                <br>
                <br><h_big>問題:Array-Set-Query</h_big>
                <br>Q個のクエリが与えられるので、処理してください。
                <br>なお、クエリの種類は t によって指定される。
                <br>&ensp;&ensp;始め、空の数列:Aがある。
                <br>&ensp;&ensp;クエリ１: t=1の時、XをAの末尾に追加する。
                <br>&ensp;&ensp;クエリ２: t=2の時、Aを昇順にソートする。
                <br>&ensp;&ensp;クエリ３: t=3の時、Aの区間:[l,r)の和を出力する。なお、[l,r)とは l&lt;= j &lt;rを満たす整数jからなる区間である。
                <br>
                <br>制約:0 &lt; Q &lt;= 1000000 , t = {1,2,3} , 1 &lt;= l &lt; r&lt; = |A|+1
                <br>
                <br>入力: 一行目に整数Q , 続くQ行にはクエリが与えられる。各行の初めの入力はtで、クエリの形式は以下のいずれかである。
                <br>&ensp;&ensp;
                <br>&ensp;&ensp;t = 1 -> "1 x"
                <br>&ensp;&ensp;t = 2 -> "2"
                <br>&ensp;&ensp;t = 3 -> "3 l r" 
                
                <br>
                <br>
                <section class="BOX">
                    <!-- 解説パート ...　長い-->
                    <div id = "ProblemExplanation" style="display: none;">
                        <center><input type="button"  id="Button_hide" onclick="HideButton()" style="font-size: 18px; border: 1px;" value = "解説を隠す"></center>

                            <br>
                            <br>
                            まずは仮想的に数列を左右二つ、別々の数列に分けて考える。
                            <br><br>ここで、二つの数列は以下のようなものとする。
                            <br>左側の数列：要素間の大小関係を元に整列しており、高速なinsertと、RangeSumQueryができる(std::set + セグ木)。
                            <br>右側の数列:要素を追加した順に整列しており、高速なpushとpopとRangeSumQueryができる。(セグ木 + (高速にpopができたら汎用性高い))
                            <br><br>
                            <br>クエリ1のpush_backクエリは右側の数列の末尾にpushする。
                            <br>クエリ２のsortは、右側にある要素を全て左側に移す。左側にinsertされたものは昇順に並んでるので、これでソートできている。
                            <br>&ensp;&ensp;また、クエリ１の個数も、左側の数列へのinsertも共にq回以下なので,insertやpushが高速ならば十分間に合う。
                            <br>クエリ３では、右左の数列の境界と l , r の位置で場合分けし、それぞれRangeSumQueryを求めれば良い。
                            <br>
                            <br>
                            <br>ここで、左側の数列とは以前書いたSplay木で実装できる<a href="./Splay-2.html">MultiSet</a>のことである。
                            <br>また、右側の数列も同じく<a href="./Splay-1.html">SplayTree</a>のことである。
                            <br>
                            <br>
                            これらのデータ構造を使うと、実装は以下のようになる。
                            <br>
                            <br>
                            <br>



                            <code>
                                <ol style="list-style:decimal-leading-zero outside;padding-left:36px;margin:0;background-color:#EEF;width:90%;line-height: 14px; color:#000;font-size:12px;">
                                <li style="background-color:#EFF;">#include&lt;iostream&gt;</li>
                                <li style="background-color:#EEF;">#include&lt;vector&gt;</li>
                                <li style="background-color:#EFF;">#include&lt;deque&gt;</li>
                                <li style="background-color:#EEF;">#include&lt;queue&gt;</li>
                                <li style="background-color:#EFF;">#include&lt;algorithm&gt;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">const long long INF = 1e18;</li>
                                <li style="background-color:#EEF;">const long long NINF = 1 - 1e18;</li>
                                <li style="background-color:#EFF;">using namespace std;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"><font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;splitした後はmergeを忘れずに！！(それかSplitした頂点のrootを覚えておこう)</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;頂点にアクセスしたら、その頂点をsplayするのを忘れるな！！</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;頂点をいじったらsplayの後、Updateするのを忘れないで</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;Treeの上の操作は、Glaphのデータ構造をを用意して行うのではなく、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNodeというデータ構造に必要なデータを持たせて、SplayNode間でやり取りさせる.</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;rootを頂点とする部分木において{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split(l,root) := lで分割</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;merge(l_root , r_root) := 頂点がl_root ,r_rootであるような部分木を連結</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert_sub(ind,NODE,root) := ind番目にNODEが挿入される</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete_sub(ind ,root) := ind番目を削除(返り値はfirstが新しいroot , secondが削除したNode)</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;これらを駆使し、様々な操作を実装可能</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">*/</font></li>
                                <li style="background-color:#EFF;">template&lt;class T&gt;</li>
                                <li style="background-color:#EEF;">class SplayTree{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;public:</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayTreeの、Nodeのデータ構造。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayTreeでは、Glaphの配列上で操作のやり取りをするのではなく、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNodeというデータ構造に持たせたデータでやり取りをする</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------   </li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;struct SplayNode{</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *parent;<font style="color:green;font-style:italic;">//親ノード</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *left;<font style="color:green;font-style:italic;">//左の子ノード</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *right;<font style="color:green;font-style:italic;">//右の子ノード</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T Value;<font style="color:green;font-style:italic;">//値(普通、頂点には値や重みが割り当てられることが多い)</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T Min,Max,Sum;<font style="color:green;font-style:italic;">//部分木のうち、値の最大、最小、和</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int SubTreeSize = 1;<font style="color:green;font-style:italic;">//1は初期化値(自分自身)</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode(){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;right = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode(T val){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;right = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Value = val;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Min = val;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max = val;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum = val;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool isExist(SplayNode *Nd){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Nd!=nullptr)return true;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else return false;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ある地点を回転させる</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void rotate(){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *Parent , *GrandParent , *Child;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent = this-&gt;parent;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrandParent = Parent-&gt;parent;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(Parent) == false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//元の親に対する位置で場合分け</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Parent-&gt;left == this){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child = this-&gt;right;<font style="color:green;font-style:italic;">//Childはnullptrかもしれない</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;right = Parent;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent-&gt;left = Child;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(Parent-&gt;right == this){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child = this-&gt;left;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;left = Parent;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent-&gt;right = Child;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(GrandParent)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//GrandParentのどちらの辺なのかで場合分け</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Parent == GrandParent-&gt;left){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrandParent-&gt;left = this;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(Parent == GrandParent-&gt;right){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrandParent-&gt;right = this;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//GrandParentがnullptrの場合でも代入OK</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;parent = GrandParent;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//親と位置を入れ替えるので</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent-&gt;parent = this;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//Childは移動するので。</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(Child))Child-&gt;parent = Parent;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nodeの持つ情報をupdateしないといけないが、順番に注意！！</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ChildはChild以下の部分木が変化してないので何もしなくてOK</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrandParentは、部分木の中の順番が変わったけど、集合としては変わってないので何もしなくてOK</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parentと自分自身(this)は順番が変わって、部分木の内容も変わったので、</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;下から　Parent　?  this の順番でupdateする</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent-&gt;update();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;自分の親から見た自分の位置</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 -&gt; 親がそもそもいない or 例外の場合</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 -&gt; 親から見て左の子の場合</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 -&gt; 親から見て右の子の場合 </li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int state(){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this-&gt;parent)== false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;parent-&gt;left == this){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(this-&gt;parent-&gt;right == this){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 2;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else {</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;あるNodeを回転を駆使し一番上まで持っていく</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;この時、回転する順番に注意</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void splay(){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this) == false)return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(isExist(this-&gt;parent)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this-&gt;parent-&gt;parent)==false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//(自分のGrandParentがいない場合、rotateは一回のみ)</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;rotate();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//それ以外の場合、(自分、親、親の親)の位置関係が大事</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(this-&gt;state() == this-&gt;parent-&gt;state()){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//GrandParentからの道が(右、右)or (左、左)の場合</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//GrandParentを一つ下に下ろして、自分を上げる</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;parent-&gt;rotate();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;rotate();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//それ以外の場合、単純に自分を2回上に上げれば良い</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;rotate();</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;rotate();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}   </li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;サイズなど、Nodeの持っている情報をupdateする(順番大事)</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void update(){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this) == false)return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;SubTreeSize = 1;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Min = this-&gt;Value;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Max = this-&gt;Value;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Sum = this-&gt;Value;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this-&gt;left)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;SubTreeSize += this-&gt;left-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;left-&gt;Min &lt; this-&gt;Min)this-&gt;Min = this-&gt;left-&gt;Min;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;left-&gt;Max &gt; this-&gt;Max)this-&gt;Max = this-&gt;left-&gt;Max;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Sum += this-&gt;left-&gt;Sum;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this-&gt;right)){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;SubTreeSize += this-&gt;right-&gt;SubTreeSize;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;right-&gt;Min &lt; this-&gt;Min)this-&gt;Min = this-&gt;right-&gt;Min;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;right-&gt;Max &gt; this-&gt;Max)this-&gt;Max = this-&gt;right-&gt;Max;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Sum += this-&gt;right-&gt;Sum;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;};</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからやっとSplayTreeに載せる関数たちの出番</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split(ind,root) , merge(l_root, r_root) , delete_sub(ind,root) , insert_sub()　など</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;これらは主にclass内で使われる。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classの外で使う関数として、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete , insert, RangeSumQuery , shiftなどが想定される</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------   </li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//これは、Nodeを管理する配列のサイズで、木のサイズではない(変更しないので、あらかじめ大きめにとっておく)</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;int Size = 0;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//この木のroot,splitした後はmergeして戻す！！rootが迷子にならないように！！</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *Root = nullptr;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayTree(){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayTree(int size_){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;bool isExist(SplayNode *Nd){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Nd==nullptr){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからは、クラス内で動かす関数たちです。俗にいうブラックボックスです。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;private:</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indexを左からの0-indexとすると、</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;求めたいindexになるまで降りていく</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *getNode(int index , SplayNode *root){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root)==false)return root;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *now = root;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(1){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int left_size = 0;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;left)){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left_size = now-&gt;left-&gt;SubTreeSize;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(index &lt; left_size){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;left;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(index == left_size){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now-&gt;splay();</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(index &gt; left_size){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;right;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index = index - left_size-1;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return now;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;それぞれ、leftrootとrightrootが根であるような部分木をくっつける</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitした後、これをしてまたsplitしたものをくっつける</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitしたまま放置すると分割された木のrootが行方不明になりそう</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *merge(SplayNode *leftRoot , SplayNode *rightRoot){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(leftRoot) == false)return rightRoot;<font style="color:green;font-style:italic;">//右のみあり</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(rightRoot) == false )return leftRoot;<font style="color:green;font-style:italic;">//左のみあり</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot = getNode(leftRoot-&gt;SubTreeSize-1 , leftRoot);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot-&gt;right = rightRoot;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot-&gt;parent = leftRoot;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot-&gt;update();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return leftRoot;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;左からleftnum番目の頂点で左右にsplit。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitした後はmergeしないと,splitした木の頂点が行方不明になりそう</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; split(int leftnum, SplayNode *root){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(leftnum&lt;=0)return std::make_pair(nullptr , root);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(leftnum &gt;= root-&gt;SubTreeSize)return std::make_pair(root, nullptr);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = getNode(leftnum , root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot , *rightRoot;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot = root-&gt;left; </li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot = root; </li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(rightRoot))rightRoot-&gt;left = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(leftRoot))leftRoot-&gt;parent = nullptr; </li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(leftRoot,rightRoot);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indexの場所を切り離して、NODEを追加して元に戻す(merge)</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode  *insert_sub(int index , SplayNode *NODE , SplayNode *root){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root) == false){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root=NODE;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size=1;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return root;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Size&lt;index || index&lt;0)return root;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; Trees = split(index,root);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot = Trees.first;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *rightRoot = Trees.second;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size++;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return merge(merge(leftRoot , NODE),rightRoot);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*  </li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;左からindexの場所を削除して、両端をくっつける</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstは消したやつ以外をmergeした時のroot</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secondは消したSplayNode</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; Delete_sub(int index , SplayNode *root){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root) == false){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(root,root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(index&lt;0 || index &gt;= Size){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(root,root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Size == 1){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size = 0;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(nullptr,nullptr);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = getNode(index,root);</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot = root-&gt;left;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *rightRoot = root-&gt;right;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(leftRoot))leftRoot-&gt;parent = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(rightRoot))rightRoot-&gt;parent = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;left = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;right = nullptr;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size--;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;update();</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(merge(leftRoot,rightRoot) , root );</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分きにおいて、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0-indexの区間[l,r)を右シフト(右端は左端へ)する</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *shift_right_sub(int l , int r , SplayNode *root ){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r--;<font style="color:green;font-style:italic;">//半開区間なので</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; tmp = Delete_sub(r,root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *N = tmp.second;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return insert_sub(l,N,root);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分きにおいて、</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0-indexの区間[l,r)を左シフト(左端は右端へ)する</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *shift_left_sub(int l , int r , SplayNode *root ){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r--;<font style="color:green;font-style:italic;">//半開区間なので</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; tmp = Delete_sub(l,root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = tmp.first;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *N = tmp.second;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return insert_sub(r,N,root);</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木の[l,r)の区間取得クエリ</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modeが 0-&gt;Min, 1-&gt;Max ,2-&gt;Sum </li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,T&gt; RangeQuery_sub(int l , int r , int mode , SplayNode *root){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot , *centerRoot , *rightRoot; </li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r--;<font style="color:green;font-style:italic;">//半開区間なので</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt;  tmp = split(r+1,root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot = tmp.second;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp = split(l,tmp.first);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot = tmp.first;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;centerRoot = tmp.second;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T ans;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//modeによって取得する値が違う</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(mode == 0){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans  = centerRoot-&gt;Min;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(mode == 1){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans  = centerRoot-&gt;Max;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(mode == 2){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans = centerRoot-&gt;Sum;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans = centerRoot-&gt;Sum;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(merge(merge(leftRoot,centerRoot),rightRoot),ans);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SubTreeSize用</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,long long&gt; RangeSubTreeSizeQuery_sub(int l , int r , SplayNode *root){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot , *centerRoot , *rightRoot;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r--;<font style="color:green;font-style:italic;">//半開区間なので</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt;  tmp = split(r+1,root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot = tmp.second;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp = split(l,tmp.first);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;centerRoot = tmp.second;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int ans = centerRoot-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(merge(merge(leftRoot,centerRoot),rightRoot),ans);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからは、クラスの外で動かす関数たちです。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public:</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体のindex番目のNode(値渡し)を取得</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode get(int index){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(index&lt;0 || index&gt;=Size){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&lt;&lt; <font style="color:brown;">"index exceeds Size"</font> &lt;&lt; std::endl;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return SplayNode(INF);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = getNode(index,Root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return *(Root);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;void insert(int index , SplayNode *NODE){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(index&lt;0 || index&gt; Size)return;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = insert_sub(index , NODE , Root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体の[l,r)のRMQ</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;T RangeMinQuery(int l , int r){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l = max(0,l);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = min(Size,r);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(l&gt;=r)return INF;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,T&gt; tmp = RangeQuery_sub(l,r,0,Root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return tmp.second;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体の[l,r)のRMQ</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;T RangeMaxQuery(int l , int r){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l = max(0,l);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = min(Size,r);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(l&gt;=r)return NINF;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,T&gt; tmp = RangeQuery_sub(l,r,1,Root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return tmp.second;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体の[l,r)のRSQ</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;T RangeSumQuery(int l , int r){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l = max(0,l);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = min(Size,r);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(l&gt;=r)return 0;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,T&gt; tmp = RangeQuery_sub(l,r,2,Root);</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return tmp.second;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体の[l,r)の区間の頂点が属する部分木のサイズ</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;long long RangeSubTreeSizeQuery(int l , int r){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l = max(0,l);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = min(Size,r);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(l&gt;=r)return 0;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,long long&gt; tmp = RangeSubTreeSizeQuery_sub(l,r,Root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return tmp.second;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体で、[l,r)を右シフト(右端は左端へ)</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;void shift_right(int l , int r){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l = max(0,l);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = min(Size,r);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(l&gt;=r)return;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = shift_right_sub(l,r,Root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体で、[l,r)を左シフト(左端は右端へ)</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;void shift_left(int l , int r){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l = max(0,l);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = min(Size,r);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(l&gt;=r)return;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = shift_left_sub(l,r,Root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体のx番目のvalueをyにする</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;void update_val(int x , T y){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = getNode(x,Root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(Root)==false)return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;Value = y;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index番目のNodeを消去</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;void Delete(int index){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; tmp = Delete_sub(index,Root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(Root) == false )return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一列に表示</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;void Debug(){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&lt;&lt;<font style="color:brown;">"DEBUG:"</font> &lt;&lt; std::endl;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for( int i = 0 ; i &lt; Size ; i++){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&lt;&lt; get(i).Value &lt;&lt; <font style="color:brown;">" "</font>;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&lt;&lt; std::endl;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;末尾に追加</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;void push_back(T val){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert(Size , new SplayNode(val)); </li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;先頭に追加</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;void push_front(T val){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert(0 , new SplayNode(val));</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">};</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;"><font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;splitした後はmergeを忘れずに！！(それかSplitした頂点のrootを覚えておこう</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;)</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;頂点にアクセスしたら、その頂点をsplayするのを忘れるな！！</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;頂点をいじったらsplayの後、Updateするのを忘れないで</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;Treeの上の操作は、Glaphのデータ構造をを用意して行うのではなく、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNodeというデータ構造に必要なデータを持たせて、SplayNode間でやり取りさせる.</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;rootを頂点とする部分木において{</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split(l,root) := lで分割</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;merge(l_root , r_root) := 頂点がl_root ,r_rootであるような部分木を連結</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;insert_sub(ind,NODE,root) := ind番目にNODEが挿入される</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete_sub(ind ,root) := ind番目を削除(返り値はfirstが新しいroot , secondが削除したNode)</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;これらを駆使し、様々な操作を実装可能</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">*/</font></li>
                                <li style="background-color:#EFF;">template&lt;class T&gt;</li>
                                <li style="background-color:#EEF;">class MyMultiSet{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;public:</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayTreeの、Nodeのデータ構造。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayTreeでは、Glaphの配列上で操作のやり取りをするのではなく、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNodeというデータ構造に持たせたデータでやり取りをする</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------   </li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;struct SplayNode{</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *parent;<font style="color:green;font-style:italic;">//親ノード</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *left;<font style="color:green;font-style:italic;">//左の子ノード</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *right;<font style="color:green;font-style:italic;">//右の子ノード</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T Value;<font style="color:green;font-style:italic;">//値(普通、頂点には値や重みが割り当てられることが多い)</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T Min,Max,Sum;<font style="color:green;font-style:italic;">//部分木のうち、値の最大、最小、和</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int SubTreeSize = 1;<font style="color:green;font-style:italic;">//1は初期化値(自分自身)</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode(){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;right = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode(T val){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;right = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Value = val;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Min = val;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max = val;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum = val;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool isExist(SplayNode *Nd){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Nd!=nullptr)return true;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else return false;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ある地点を回転させる</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void rotate(){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *Parent , *GrandParent , *Child;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent = this-&gt;parent;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrandParent = Parent-&gt;parent;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(Parent) == false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//元の親に対する位置で場合分け</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Parent-&gt;left == this){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child = this-&gt;right;<font style="color:green;font-style:italic;">//Childはnullptrかもしれない</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;right = Parent;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent-&gt;left = Child;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(Parent-&gt;right == this){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child = this-&gt;left;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;left = Parent;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent-&gt;right = Child;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(GrandParent)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//GrandParentのどちらの辺なのかで場合分け</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Parent == GrandParent-&gt;left){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrandParent-&gt;left = this;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(Parent == GrandParent-&gt;right){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrandParent-&gt;right = this;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//GrandParentがnullptrの場合でも代入OK</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;parent = GrandParent;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//親と位置を入れ替えるので</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent-&gt;parent = this;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//Childは移動するので。</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(Child))Child-&gt;parent = Parent;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nodeの持つ情報をupdateしないといけないが、順番に注意！！</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ChildはChild以下の部分木が変化してないので何もしなくてOK</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GrandParentは、部分木の中の順番が変わったけど、集合としては変わってないので何もしなくてOK</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parentと自分自身(this)は順番が変わって、部分木の内容も変わったので、</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;下から　Parent　?  this の順番でupdateする</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parent-&gt;update();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;自分の親から見た自分の位置</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 -&gt; 親がそもそもいない or 例外の場合</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 -&gt; 親から見て左の子の場合</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2 -&gt; 親から見て右の子の場合 </li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int state(){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this-&gt;parent)== false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;parent-&gt;left == this){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(this-&gt;parent-&gt;right == this){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 2;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else {</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;あるNodeを回転を駆使し一番上まで持っていく</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;この時、回転する順番に注意</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void splay(){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(isExist(this-&gt;parent)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this-&gt;parent-&gt;parent)==false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//(自分のGrandParentがいない場合、rotateは一回のみ)</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;rotate();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//それ以外の場合、(自分、親、親の親)の位置関係が大事</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(this-&gt;state() == this-&gt;parent-&gt;state()){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//GrandParentからの道が(右、右)or (左、左)の場合</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//GrandParentを一つ下に下ろして、自分を上げる</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;parent-&gt;rotate();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;rotate();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//それ以外の場合、単純に自分を2回上に上げれば良い</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;rotate();</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;rotate();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}   </li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;サイズなど、Nodeの持っている情報をupdateする(順番大事)</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void update(){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this) == false)return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;SubTreeSize = 1;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Min = this-&gt;Value;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Max = this-&gt;Value;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Sum = this-&gt;Value;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this-&gt;left)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;SubTreeSize += this-&gt;left-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;left-&gt;Min &lt; this-&gt;Min)this-&gt;Min = this-&gt;left-&gt;Min;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;left-&gt;Max &gt; this-&gt;Max)this-&gt;Max = this-&gt;left-&gt;Max;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Sum += this-&gt;left-&gt;Sum;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(this-&gt;right)){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;SubTreeSize += this-&gt;right-&gt;SubTreeSize;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;right-&gt;Min &lt; this-&gt;Min)this-&gt;Min = this-&gt;right-&gt;Min;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(this-&gt;right-&gt;Max &gt; this-&gt;Max)this-&gt;Max = this-&gt;right-&gt;Max;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this-&gt;Sum += this-&gt;right-&gt;Sum;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;};</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからやっとSplayTreeに載せる関数たちの出番</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;split(ind,root) , merge(l_root, r_root) , delete_sub(ind,root) , insert_sub()　など</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;これらは主にclass内で使われる。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classの外で使う関数として、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete , insert, RangeSumQuery , shiftなどが想定される</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------   </li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//これは、Nodeを管理する配列のサイズで、木のサイズではない(変更しないので、あらかじめ大きめにとっておく)</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;int Size = 0;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//この木のroot,splitした後はmergeして戻す！！rootが迷子にならないように！！</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *Root = nullptr;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;MyMultiSet(){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;MyMultiSet(int size_){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;bool isExist(SplayNode *Nd){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Nd==nullptr){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return true;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからは、クラス内で動かす関数たちです。俗にいうブラックボックスです。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;private:</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indexを左からの0-indexとすると、</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;求めたいindexになるまで降りていく</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *getNode(int index , SplayNode *root){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root)==false)return root;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *now = root;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(1){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int left_size = 0;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;left)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left_size = now-&gt;left-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(index &lt; left_size){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;left;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(index == left_size){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now-&gt;splay();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(index &gt; left_size){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;right;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index = index - left_size-1;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return now;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;それぞれ、leftrootとrightrootが根であるような部分木をくっつける</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitした後、これをしてまたsplitしたものをくっつける</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitしたまま放置すると分割された木のrootが行方不明になりそう</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *merge(SplayNode *leftRoot , SplayNode *rightRoot){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(leftRoot) == false)return rightRoot;<font style="color:green;font-style:italic;">//右のみあり</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(rightRoot) == false )return leftRoot;<font style="color:green;font-style:italic;">//左のみあり</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot = getNode(leftRoot-&gt;SubTreeSize-1 , leftRoot);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot-&gt;right = rightRoot;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot-&gt;parent = leftRoot;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot-&gt;update();</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return leftRoot;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;左からleftnum番目の頂点で左右にsplit。</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splitした後はmergeしないと,splitした木の頂点が行方不明になりそう</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; split(int leftnum, SplayNode *root){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(leftnum&lt;=0)return std::make_pair(nullptr , root);</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(leftnum &gt;= root-&gt;SubTreeSize)return std::make_pair(root, nullptr);</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = getNode(leftnum , root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot , *rightRoot;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot = root-&gt;left; </li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot = root; </li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(rightRoot))rightRoot-&gt;left = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(leftRoot))leftRoot-&gt;parent = nullptr; </li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(leftRoot,rightRoot);</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indexの場所を切り離して、NODEを追加して元に戻す(merge)</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode  *insert_sub( SplayNode *NODE , SplayNode *root){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root) == false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root=NODE;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size=1;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return root;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *now = root;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *next = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(now-&gt;Value&gt;NODE-&gt;Value){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;left) == false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now-&gt;left = NODE;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NODE-&gt;parent = now;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;left;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;right) == false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now-&gt;right = NODE;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NODE-&gt;parent = now;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;right;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size++;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now-&gt;splay();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return now;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*  </li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木において、</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;左からindexの場所を削除して、両端をくっつける</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstは消したやつ以外をmergeした時のroot</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secondは消したSplayNode</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; Delete_sub(int index , SplayNode *root){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root) == false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(root,root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(index&lt;0 || index &gt;= Size){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(root,root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Size == 1){</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size = 0;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(nullptr,nullptr);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = getNode(index,root);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot = root-&gt;left;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *rightRoot = root-&gt;right;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(leftRoot))leftRoot-&gt;parent = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(rightRoot))rightRoot-&gt;parent = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;left = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;right = nullptr;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size--;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;update();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(merge(leftRoot,rightRoot) , root );</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NODEと同じvalueをもつ要素をpop</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; erase_sub(SplayNode *NODE , SplayNode *root){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root)==false){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(root,root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *now = root;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now)==false){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//そもそもNODE.valueと同じvalueを持つ頂点がなかった時</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">//何もせず終了</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(root,root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(now-&gt;Value == NODE-&gt;Value){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(now-&gt;Value &gt; NODE-&gt;Value){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;left;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;right;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root = now;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;splay();</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot = root-&gt;left;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *rightRoot = root-&gt;right;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(leftRoot))leftRoot-&gt;parent = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(rightRoot))rightRoot-&gt;parent = nullptr;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;left = nullptr;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;right = nullptr;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size--;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(merge(leftRoot,rightRoot) , root );</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootを根とする部分木の[l,r)の区間取得クエリ</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,T&gt; RangeQuery_sub(int l , int r , SplayNode *root){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *leftRoot , *centerRoot , *rightRoot; </li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r--;<font style="color:green;font-style:italic;">//半開区間なので</font></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt;  tmp = split(r+1,root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rightRoot = tmp.second;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp = split(l,tmp.first);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leftRoot = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;centerRoot = tmp.second;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T ans = centerRoot-&gt;Sum;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(merge(merge(leftRoot,centerRoot),rightRoot),ans);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootが根であるような部分木の頂点のうち、val未満の頂点の個数を返す</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,int&gt; lower_bound_sub(T val , SplayNode *root){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root) == false)return std::make_pair(root,0);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *now = root;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int res = root-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;right))res -= now-&gt;right-&gt;SubTreeSize;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(now-&gt;Value &gt;=val){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;left)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;left;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res-=1;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;right))res-=now-&gt;right-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res--;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;right)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;right;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res+=1;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;left))res+=now-&gt;left-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now-&gt;splay();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(now , res);</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootが根であるような部分木の頂点のうち、val以下の頂点の個数を返す</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,int&gt; upper_bound_sub(T val , SplayNode *root){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(root) == false)return std::make_pair(root,0);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SplayNode *now = root;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int res = root-&gt;SubTreeSize;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;right))res -= now-&gt;right-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(true){</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(now-&gt;Value &gt; val){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;left)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;left;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res-=1;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;right))res-=now-&gt;right-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res--;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;right)){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now = now-&gt;right;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res+=1;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(now-&gt;left))res+=now-&gt;left-&gt;SubTreeSize;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now-&gt;splay();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return std::make_pair(now , res);</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ここからは、クラスの外で動かす関数たちです。</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public:</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;木全体のindex番目のNode(値渡し)を取得</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayNode get(int index){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(index&lt;0 || index&gt;=Size){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&lt;&lt; <font style="color:brown;">"index exceeds Size"</font> &lt;&lt; std::endl;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return SplayNode(INF);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = getNode(index,Root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return *(Root);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;void insert( T val ){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = insert_sub(new SplayNode(val) ,Root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index番目のNodeを消去</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;void Delete(int index){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,SplayNode*&gt; tmp = Delete_sub(index,Root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(isExist(Root) == false )return;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valを持つ頂点を一つpop</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;void erase(T val){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = erase_sub(new SplayNode(val) , Root).first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;小さい方からl番目以上、r番目未満の要素の和</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;T RangeSumQuery(int l , int r){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l = max(0,l);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = min(Size,r);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(l&gt;=r)return 0;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,T&gt; tmp = RangeQuery_sub(l,r,Root);</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return tmp.second;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootが根であるような部分木の頂点のうち、val未満の頂点の個数を返す</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;int lower_bound(T val){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,int&gt; tmp = lower_bound_sub(val,Root);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return tmp.second;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rootが根であるような部分木の頂点のうち、val以下の頂点の個数を返す</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;int upper_bound(T val){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::pair&lt;SplayNode*,int&gt; tmp = upper_bound_sub(val,Root);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root = tmp.first;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root-&gt;update();</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return tmp.second;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;<font style="color:green;font-style:italic;">/*</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一列に表示</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;*/</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;void Debug(){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&lt;&lt;<font style="color:brown;">"DEBUG:"</font> &lt;&lt; std::endl;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for( int i = 0 ; i &lt; Size ; i++){</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&lt;&lt; get(i).Value &lt;&lt; <font style="color:brown;">" "</font>;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cerr&lt;&lt; std::endl;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">};</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">int main(){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;int q;cin &gt;&gt;q;</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;SplayTree&lt;long long&gt; St;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;MyMultiSet&lt;long long&gt;Ms;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for(int i = 0 ; i &lt; q ; i++){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int t,x,y;cin &gt;&gt; t;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(t==1){<font style="color:green;font-style:italic;">//push_backクエリ</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin &gt;&gt; x;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;St.push_back(x);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(t==2){<font style="color:green;font-style:italic;">//sortクエリ</font></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(St.Size&gt;0){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ms.insert(St.get(0).Value);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;St.Delete(0);</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<font style="color:green;font-style:italic;">//mergeクエリ</font></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin &gt;&gt; x &gt;&gt; y;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x--;y--;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long long res;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(Ms.Size&lt;=x){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res = St.RangeSumQuery(x-Ms.Size , y-Ms.Size);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else if(Ms.Size &lt;= y){</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res = Ms.RangeSumQuery(x,Ms.Size) + St.RangeSumQuery(0,y-Ms.Size);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res = Ms.RangeSumQuery(x,y);</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout &lt;&lt;res &lt;&lt; endl;</li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</li>
                                <li style="background-color:#EFF;">}</li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                <li style="background-color:#EFF;"></li>
                                <li style="background-color:#EEF;"></li>
                                </ol>
                            </code>


                            <br><br><br>




                        <center><input type="button" id="Button_hide" onclick="HideButton()" style="font-size: 18px; border: 1px;" value = "解説を隠す"></center>
                    </div>
                    







                    <div id = "HideCheck" style="display: block;">
                        <center><input type="button"  id="Button_appear" onclick="AppearButton()" style="font-size: 18px; border: 1px;" value = "解説を表示する"></center>
                    </div>

                    <script>
                        function AppearButton(){
                            document.getElementById("ProblemExplanation").style.display = "block";
                            document.getElementById("HideCheck").style.display = "none";
                        }

                        function HideButton(){
                            document.getElementById("ProblemExplanation").style.display = "none";
                            document.getElementById("HideCheck").style.display = "block";
                        }
                    </script>


                </section>


                

                
            </section>



        </nav>
        <br>


    </body>


</html>
