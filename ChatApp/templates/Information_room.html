<!doctype html>
<html lang="ja">
    <link rel="stylesheet" media="screen and (max-width:768px)" href="./../static/css/ChatRoom_SmartPhone.css">
    <link rel="stylesheet" media="screen and (min-width:769px)" href="./../static/css/ChatRoom_PC.css">
    <link rel = "stylesheet" href = "./../static/css/common.css">
    <link rel="icon" href="./../static/image/favicon.ico">
    
    <script src = "./../static/javascript/client.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha384-ZCmVL/dTQHh41JxtZe73klDRFSJ/zixGCGt5lhnLQGjSWfAnlXSg+GSnRACaK5lc" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
    
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0">


    <title>ãŠã—ã‚‰ã›</title>
    </head>
    
    
   <!--èƒŒæ™¯(imageã®ç›¸å¯¾ãƒ‘ã‚¹ã¯ChatRoom.htmlãŒã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰)-->
    <div class = "BackGround_basic" id = "BackGroundTag" style = "background-image:url(./../static/image/background_green1.png);"></div>
    
    
    
    
    <!--
        éƒ¨å±‹ã®æƒ…å ±ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼
    -->
    <div class = "ChatRoomMenu_bar" id = "ChatRoomMenu_bar">
        
            
        
        <!--ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹-->
        <span onclick = "return_to_TOPPAGE()" style = "font-size:15px;">&ensp;&ensp;â¬…ï¸ï¸&ensp;&ensp;</span> 
        
        
        
            
         
        <!--ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã®èª¬æ˜-->
        <span class = "ChatRoomExplanation_Button" onclick = "SetHTML('ChatRoomExplanation')" style = "float:right; margin-right:5%; top:3px;"> i </span>
        <span style = "clear:right;" name = "floatã‚’æ¶ˆã™ãŸã‚ã®div" ></span>
        
        
        
        
        <!--ãƒ«ãƒ¼ãƒ åã€€and ã“ã“ã‚’æŠ¼ã™ã¨ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«-->
        <center><div style = "font-size:12px; margin-top:2px;margin-bottom:2px;" onclick="scroll_to_TOP()">{{chatRoomName_JP}}</div></center>
        
        
        
        <!--ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã‚„æ³¨æ„æ›¸ã-->
        
        
        <!--éƒ¨å±‹ã®èª¬æ˜-->
        <div class = "ChatRoomExplanation"  id = "ChatRoomExplanation"  style = "display:none;">
            <br>
            <center><h_big>{{chatRoomName_JP}}</h_big></center>
            <center>{{chatRoomExplanation}}</center>    
            <br>

            <center><button class = 'nomal_button' onclick = "HideHTML('ChatRoomExplanation')">CLOSE</button></center>
            <br>
        </div>
        
        
        
        
        
    </div>


    <br>
    <br>
    <br>
    
    
    
    
    <!--ãƒ‡ã‚«ã‚ã®è¦ªè¦ç´ ã€‚-->
    <div class  = 'Inner' , id = 'Inner' style = "background-color:rgba(255,255,255,0);">
        
        
        <br>
        <!--ãƒãƒ£ãƒƒãƒˆæ¬„-->
        <div class = 'ChatArea'  id = 'ChatArea'>
            
            
        </div>
        
        <!--æ–°ç€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ¥ãŸæ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³-->
        <div class = "NewMessageSign" id = "NewMessageSign" ></div>
        

        
        
        
    </div>
    


    <!--ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠ-->
    <!-- ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®valueãŒãã®ã¾ã¾ã‚³ãƒãƒ³ãƒ‰ã«ãªã£ã¦ãŠã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«éš ã—ã‚³ãƒãƒ³ãƒ‰ã‚’ä»˜ã‘åŠ ãˆã‚‹ -->
    <div class = "SelectMessageOption" id = "SelectMessageOption" style = "display:none;">
        <div id = "SelectMessageOption_Close" onclick = "HideHTML('SelectMessageOption')"  style = " border-radius:15px;width:100%;background-color:red;text-align:center;color:white;">CLOSE</div>
        
        ãƒ†ã‚­ã‚¹ãƒˆã®è‰²:
        
        <!--valueãŒãã®ã¾ã¾éš ã—ã‚³ãƒãƒ³ãƒ‰ã«ãªã£ã¦ã„ã‚‹-->
        <br>&ensp;&ensp;<label><input type="radio" name="MessageColor_SelectRadioButton" value="Color-0:" checked>BLACK</label>
        <br>&ensp;&ensp;<label><input type="radio" name="MessageColor_SelectRadioButton" value="Color-1:" >RED</label>
        <br>&ensp;&ensp;<label><input type="radio" name="MessageColor_SelectRadioButton" value="Color-2:" >BLUE</label>
        <br>&ensp;&ensp;<label><input type="radio" name="MessageColor_SelectRadioButton" value="Color-3:" >PINK</label>
        
        <br>
        <br>
        
        ãƒ¦ãƒ¼ã‚¶ãƒ¼å:
        <br>&ensp;&ensp;<label><input type="radio" name="MessageUserName_SelectRadioButton" value="" checked>ãƒ‘ãƒ³ãƒ”ãƒ¼</label>
        <br>&ensp;&ensp;<label><input type="radio" name="MessageUserName_SelectRadioButton" value="NokonoKotlin:" >ã‚µã‚¯ãƒ©</label>


        
            
        
        
    </div>
    
    

    
    



        
    
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>

    


    
</html>





<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->








<!--=========================================================================================================================-->
<!--HTMLè¦ç´ ã®åˆæœŸåŒ–=========================================================================================================-->
<!--=========================================================================================================================-->




<script>
    
    /*
        HTMLå†…ã®é…ç½®ã‚„åˆæœŸåŒ–ã‚’è¡Œã„ã¾ã™ã€‚
    */
            
    var WindowHeight = window.innerHeight;
    var WindowWidth = window.innerWidth;


    //HTMLè¦ç´ ã‚’ã‚»ãƒƒãƒˆ
    function SetHTML(id){
        document.getElementById(id).style.display = 'block';
    }
    
    
    //HTMLè¦ç´ ã‚’å‰Šé™¤ï¼ˆè¦‹ãˆãªãã™ã‚‹ï¼‰
    function HideHTML(id){
        document.getElementById(id).style.display = 'none';
    }
    
    
        
    function init_HTML(){
        
        SetHTML('ChatArea')
        
        
        
    }
    


    /*
    ãƒ‡ãƒãƒƒã‚°ã‚ˆã†
    */
    function reload(){
        console.log("reloaded");
        location.reload(true);
    }    
    
    
    
    /*
        ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ã‚¨ãƒªã‚¢ã®æ”¹è¡Œã®å‡¦ç†
    */
    function textAreaHeightSet(argObj){

        // ä¸€æ—¦ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’å°ã•ãã—ã¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆç¸¦ã®é•·ã•ã‚’å–å¾—ï¼‰
        argObj.style.height = "10px";
        var wSclollHeight = parseInt(argObj.scrollHeight);
        // 1è¡Œã®é•·ã•ã‚’å–å¾—ã™ã‚‹
        var wLineH = parseInt(argObj.style.lineHeight.replace(/px/, ''));
        // æœ€ä½2è¡Œã®è¡¨ç¤ºã‚¨ãƒªã‚¢ã«ã™ã‚‹
        if(wSclollHeight < (wLineH * 2)){wSclollHeight=(wLineH * 2);}
        // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®é«˜ã•ã‚’è¨­å®šã™ã‚‹
        if(wSclollHeight <= 100)argObj.style.height = wSclollHeight + "px";
        else argObj.style.height = 100 + "px";
    }
        
    
    

    
    function return_to_TOPPAGE(){
        window.location = "/";
    }
    
    
    //windowãƒ¡ã‚½ãƒƒãƒ‰ã§TOPã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    function scroll_to_TOP(){
        window.scrollTo({
            top:0,
            left:0,
            behavior: 'smooth'
        });
    }
    
    
    function scroll_to_BOTTOM(){
        var element = document.documentElement;
        var bottom = element.scrollHeight - element.clientHeight;
        window.scroll(0, bottom);
    }
    
    
    
    
    
    
    
    init_HTML();
    
    //alert("ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ä½ç½®æƒ…å ±ã‚’ä½¿ã„ã¾ã™ã€‚\n ä½ç½®æƒ…å ±è¨­å®šã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚")

    window.onresize = init_HTML;

    
</script>











<!--=========================================================================================================================-->
<!--æ±ç”¨çš„ãªé–¢æ•°ãŸã¡==========================================================================================================-->
<!--=========================================================================================================================-->






<script>
    
    
    
        
    //æ•°å€¤ï¼šxã«å¯¾å¿œã™ã‚‹è‰²(cssã«ãŠã‘ã‚‹è‰²ã‚’è¡¨ã™æ–‡å­—åˆ—)ã‚’è¿”ã™é–¢æ•°ã€‚Color-x:ã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†ã§ä½¿ã†
    function color_for_x(x){
        if(x == 0)return "black";
        else if(x == 1)return "red";
        else if(x == 2)return "blue";
        else if(x == 3)return "pink";
        else return "black";
    }
    
    
    
    
    //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¹ãå‡ºã—ã‚’æŠ¼ã™ã¨ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹(å¼•æ•°ã«event)
    function DisplayMessageInfo(e){
        alert(e.target.id)
    }
</script>
















<!--=========================================================================================================================-->
<!--ã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã—ã¦ã€ãƒãƒ£ãƒƒãƒˆã®æƒ…å ±ã‚’å–ã£ã¦ããŸã‚Šã€ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã®æƒ…å ±å–å¾—ã‚„æ›´æ–°ã‚’è¡Œã†==========================================================================================================-->
<!--=========================================================================================================================-->












<script>



    /*
        ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚„ã‚Šå–ã‚Šã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
        ã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã—ã¾ã™ã€‚
    */
    
    
    
    //ãƒ¡ã‚¤ãƒ³å‡¦ç†åŠã³å¤‰æ•°å®£è¨€
    //ãƒ¡ã‚¤ãƒ³å‡¦ç†åŠã³å¤‰æ•°å®£è¨€
    //ãƒ¡ã‚¤ãƒ³å‡¦ç†åŠã³å¤‰æ•°å®£è¨€
    //ãƒ¡ã‚¤ãƒ³å‡¦ç†åŠã³å¤‰æ•°å®£è¨€




    
    //é€šä¿¡
    var socket = io();
    
    
    
    
    
    

    
    /*
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ(ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ )ã®ãƒ‡ãƒ¼ã‚¿    
        ã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã™ã‚‹ã¨ãã‚‚ã€ã“ã‚Œã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹
        éšæ™‚æ›´æ–°ã™ã‚‹
        
        ChatRoomName : ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‚åŠ ã—ã¦ã„ã‚‹éƒ¨å±‹å
        message_text : é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(é€ä¿¡æ™‚ã®ã¿å‚ç…§)ã€‚ã¾ãŸã€å‰å›é€ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ä¿å­˜ã—ã¦ãŠã
        LatestMessageTimeStamp : ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒãƒ£ãƒƒãƒˆæ¬„ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æœ€æ–°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
        ClientLongitude : ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç¾åœ¨åœ°ã®çµŒåº¦
        ClientLatitude : ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç¾åœ¨åœ°ã®ç·¯åº¦
        
        
            
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯ã“ã“ã§ç®¡ç†ã™ã‚‹ã®ã§ã€ã¡ã‚ƒã‚“ã¨ç®¡ç†ã€æ›´æ–°ã™ã‚‹ã“ã¨ãŒå¤§äº‹
            
    */
    var Client_json_data = {
        
        ChatRoomName :  {{chatRoomName | tojson}} , 
        
        message_text : 'NULL' ,
        
        LatestMessageTimeStamp : -1 ,
        
        ClientLongitude : 135 ,
        
        ClientLatitude : 36 ,
        
        ClientUserType : {{usrType | tojson}}
        
    }
    



    
    get_ChatData_from_server();
    //TimestampãŒ-1(åˆæœŸåŒ–å€¤ã§ã‚ã‚‹ã‹ãã‚Šã“ã‚Œã¾ã§ã®ãƒãƒ£ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼ã«è¦æ±‚ã™ã‚‹(ãƒã‚°ã§ã¡ã‚ƒã‚“ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚Œãªã„å¯èƒ½æ€§ã‚‚ã‚ã‚‹ã‹ã‚‰)
    interval_UserPosition_update =  setInterval(get_ChatData_from_server  , 3000);

    
    //æœ€åˆã«ç¾åœ¨åœ°ã®ä½ç½®æƒ…å ±ã‚’å–å¾—and,ãã®ä½ç½®æƒ…å ±ãŒã“ã®éƒ¨å±‹ã§æœ‰åŠ¹ã‹ãƒã‚§ãƒƒã‚¯
    
    reload_ChatRoom();
    /*
        ä»¥é™ã¯ä¸€å®šæ™‚é–“æ¯ã«ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
        (ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã¯ãªãã€å‚åŠ è€…æ¨©é™ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã ã‘)
        HTMLã®è¦ç´ ã‚‚æ›´æ–°ã—ãŸã‚Šã™ã‚‹ã®ã§å¿˜ã‚Œãšã«
    */
    interval_UserPosition_update =  setInterval(reload_ChatRoom  , 3000);
    
    







    //====================================================================================================================================================================================
    //====================================================================================================================================================================================
    //=====================================================é–¢æ•°ãŸã¡====================================================================================================
    //====================================================================================================================================================================================







    /*
        æœ€åˆã«ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ã‚’ã“ã‚Œã¾ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§æ›´æ–°
        
        ã‚µãƒ¼ãƒãƒ¼ã«ã¯
        ç¾åœ¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¨ã€    
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¥ç¶šã—ã¦ã„ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ åã‚’jsonã§é€ä¿¡ã™ã‚‹
    */
    function get_ChatData_from_server(){
        //åˆæœŸçŠ¶æ…‹ãªã‚‰
        if(Client_json_data.LatestMessageTimeStamp == -1)socket.emit('return_updated_data' , Client_json_data);
        
    }
    
    
    




    /*
        ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã‚’å®šæœŸçš„ã«ãƒªãƒ­ãƒ¼ãƒ‰ã€‚ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã‚’æ›´æ–°ã—ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒãªããªã£ã¦ã„ã‚Œã°ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã™
        ã‚³ãƒ¼ãƒ‰è¦ç´„ãªã®ã§ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ1ã¤ã§ã‚‚jsonãƒ•ã‚¡ã‚¤ãƒ«ã§é€šä¿¡ã‚’è¡Œã„ã¾ã™
        
        (ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã¯ãªãã€å‚åŠ è€…æ¨©é™ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã ã‘)
    */
    function reload_ChatRoom(){
        
        
         //ã†ã¾ãä½ç½®æƒ…å ±ã‚’å–å¾—ã§ããªã‹ã£ãŸå ´åˆã€å¾…æ©Ÿ
        if(Client_json_data.ClientLongitude == -1 || Client_json_data.ClientLongitude == -1)return false;
        
        
        socket.emit('reload_Client_ChatRoom' , Client_json_data);
        
        
        
        
        return true;
    }
    
    
    
    
    
    



    



    
    
    

        
        
        
        

    
    
    
    
    
    
    /*
        Likeã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡
        ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾å¿œã—ãŸãƒœã‚¿ãƒ³ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚‹
        ãƒœã‚¿ãƒ³ã‚¿ã‚°ã®ã®idãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ï¼ˆã‚µãƒ¼ãƒãƒ¼ã«ãŠã‘ã‚‹ï¼‰ã‚°ãƒ­ãƒ¼ãƒãƒ«IDã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã®ã§ã€idã‚’ãã®ã¾ã¾é€ä¿¡ã™ã‚‹
        é€ä¿¡ã™ã‚‹jsonãƒ‡ãƒ¼ã‚¿ã¯ã€
        {
            MessageGlobalID :
            ChatRoomName :
            ClientLongitude : 
            ClientLatitude :
        }
    */
    function send_Like(e){
        var json_data_for_server = {
            ChatRoomName : Client_json_data.ChatRoomName , 
            MessageGlobalID : e.target.id , 
            ClientLongitude : Client_json_data.ClientLongitude,
            ClientLatitude : Client_json_data.ClientLatitude
        }
        socket.emit('send_Like_for_database',json_data_for_server);
        document.getElementById('' + e.target.id).onclick = "";
    }
    
    
    
    
    
    
    
    
 
    
    

    
    
    
    /*    
        ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ã‚‰ã‚Œã¦ãã‚‹ã®ã§ã€Client_json_dataã‚„ãƒãƒ£ãƒƒãƒˆæ¬„ã‚’æ›´æ–°
        
        
        ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®æ›´æ–°(ä¸€ã¤ãšã¤textãŒé€ã‚‰ã‚Œã¦ãã‚‹ã®ã§ã€é †æ¬¡è¿½åŠ )
          'update_ChatArea-'+ChatRoomName_now ã¨ã‚ã‚‹ãŒã€
          ã“ã‚Œã¯ä»Šç¾åœ¨å‚åŠ ã—ã¦ã„ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã®çª“å£ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ã™
          (+ChatRoomName_nowãŒãªã‘ã‚Œã°ã€ä»–ã®ãƒ«ãƒ¼ãƒ ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚å—ã‘å–ã£ã¦ã—ã¾ã†ã‹ã‚‰)
          
          
          éš ã—ã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†ã€
          floatã«ã‚ˆã‚‹æ„å›³ã—ãªã„ä½ç½®ã‚ºãƒ¬ã®å¯¾å¿œ(æ”¹è¡Œå…¼Likeãƒœã‚¿ãƒ³ã«clearã‚’ä¹—ã›ã¦å¼·åˆ¶çš„ã«æ”¹è¡Œ)
          æœ€æ–°ã®æƒ…å ±æ¬„ã®æ›´æ–°
          
    */
    socket.on('update_ChatArea-' + Client_json_data.ChatRoomName , function(json_data) {
        console.log("GET")
        Client_json_data.LatestMessageTimeStamp = json_data.TimeStamp;
        
        
        var ChatAreaElement = document.getElementById('ChatArea');
        
        //ãƒ¦ãƒ¼ã‚¶ãƒ¼å
        var userName = 'ãƒ‘ãƒ³ãƒ”ãƒ¼'
        if(json_data.Type == 1)userName = 'Admin'
        else if(json_data.Type == 3)userName = 'ã‚µã‚¯ãƒ©'
        
        
        //ãƒ†ã‚­ã‚¹ãƒˆã®è‰²(messageã®éš ã—ã‚³ãƒãƒ³ãƒ‰ . Color-x:ã§æŒ‡å®š) x = 0 -> é»’; ä»–ã¯REDMEå‚ç…§
        var textColor = 0;
        //å—ç†ã•ã‚Œã‚‹Colorã‚³ãƒãƒ³ãƒ‰ã®é›†åˆ(in æ¼”ç®—å­ã§Keyã®å­˜åœ¨ã‚’åˆ¤å®šå¯èƒ½)
        var ColorOK =  {"Color-0:":true ,"Color-1:":true,"Color-2:":true ,"Color-3:":true};

        
        
        //éš ã—ã‚³ãƒãƒ³ãƒ‰å‡¦ç†(å…¨éƒ¨)
        while(1){
            var isCommandExist = false;
            
            
            if(json_data.Text.substring(0,String("NokonoKotlin:").length) == "NokonoKotlin:"){
                //æœ€åˆã®length(NokonoKotlin:)æ–‡å­—ç›®ã¾ã§ãŒ NokonoKotlin:ã‚³ãƒãƒ³ãƒ‰ã¨ä¸€è‡´
                userName = 'ã‚µã‚¯ãƒ©';        
                json_data.Text = json_data.Text.substring(String("NokonoKotlin:").length , json_data.Text.length);//ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ‡ã‚Šå–ã‚Š
                isCommandExist = true;
                
            }else if(json_data.Text.substring(0,String("Color-x:").length) in ColorOK){
                //æœ€åˆã®length(NokonoKotlin:)æ–‡å­—ç›®ã¾ã§ãŒ æŒ‡å®šã•ã‚ŒãŸColor-xã‚³ãƒãƒ³ãƒ‰ã¨ä¸€è‡´
                textColor = parseInt(json_data.Text[6]);//intã§æ‰±ã„ãŸã„ã®ã§
                json_data.Text = json_data.Text.substring(String("Color-x:").length , json_data.Text.length);//ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ‡ã‚Šå–ã‚Š
                isCommandExist = true;
                console.log(textColor)
            }
            
            
            //ã‚‚ã†ã‚³ãƒãƒ³ãƒ‰ãŒãªããªã£ãŸã‚‰
            if(isCommandExist == false){
                break;
            }
        }
           
        
        
        //è¡¨ç¤ºã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®HTMLã‚¿ã‚°(é€ä¿¡è€…ã«ã‚ˆã£ã¦å·¦å³ã«åˆ†ã‘ã‚‹ . nameã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æƒ…å ±ã‚’æ ¼ç´)
        var ChatMessageTag;
        //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®cssã‚¯ãƒ©ã‚¹
        var ChatMessageCssClass;
        
        // æ”¹è¡Œ å…¼ Likeãƒœã‚¿ãƒ³ã®HTMLã‚¿ã‚° (æ”¹è¡Œã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®cssã®floatã‚’æ¶ˆã™ãŸã‚ã«ã‚ã‚‹ã®ã§ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‘ãã«ã‚ˆã£ã¦clearã®æ–¹å‘ãŒå¤‰ã‚ã‚‹)
        var EndLineandLikesTag;
        
        
        
        
        ChatMessageTag = "<div class = 'ChatMessage_left' id = '"
         + "Message send by " + userName + " : "+json_data.Date + " : id - " + json_data.MessageGlobalID 
        +"' onclick = 'DisplayMessageInfo(event)'></div>";
        
        //å·¦
        ChatMessageCssClass = 'ChatMessage_left';
        
        /*
            
            adminã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«Likeãƒœã‚¿ãƒ³ã¯ãªã„
             æ”¹è¡Œã®å½¹å‰²ã€clear:left;ã™ã‚‹ã“ã¨ã§float:left;ã‚’æ¶ˆã™
        */
        
        EndLineandLikesTag = "<div style = 'width:100%; clear:left; margin-left: 4%;'>"
        + "By : "
        + userName
        + "</div>";
    
        
        //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚°ã‚’ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ã«è¿½åŠ (ã¨ã‚Šã‚ãˆãšã‚¿ã‚°ã ã‘è¿½åŠ ã—ã¦ã€å¾Œã§ä¸­èº«ã‚’)
        ChatAreaElement.insertAdjacentHTML('beforeend', ChatMessageTag);
        
        
        //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚°ã®ä¸€è¦§
        var ChatMessageList = document.getElementsByClassName(ChatMessageCssClass);
        var index_end = ChatMessageList.length - 1;//ã•ã£ãè¿½åŠ ã—ãŸã‚¿ã‚°ã®index
        
            
        if(index_end >= 0){
            //æœ€å¾Œã®ã‚¿ã‚°ãŒä»Šè¿½åŠ ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã®ã§ã€ãã“ã«å†…å®¹ã‚’æ›¸ãè¾¼ã‚€
            ChatMessageList[index_end].innerText = json_data.Text;
            
            //Color-x:ã‚³ãƒãƒ³ãƒ‰ã®è‰²ã«å¤‰ãˆã‚‹
            ChatMessageList[index_end].style.color = color_for_x(textColor);
            
            console.log(color_for_x(textColor))
            
            
        }
        
    
        
        
        //æ”¹è¡Œ å…¼ Likeãƒœã‚¿ãƒ³ã‚¿ã‚°ã‚’è¿½åŠ ã€‚ã“ã“ã§floatã‚’clearã™ã‚‹
        ChatAreaElement.insertAdjacentHTML('beforeend', EndLineandLikesTag);
        
        
    });
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    /*
        ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ åˆ©ç”¨ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸæ™‚ç”¨ã®ã‚¨ãƒ©ãƒ¼çª“å£
        ã‚¨ãƒ©ãƒ¼ã¨ã¯ã‚µãƒ¼ãƒãƒ¼ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ãªã‚¨ãƒ©ãƒ¼ã§ã¯ãªãã€ã‚¢ãƒ—ãƒªã§å®šã‚ã‚‰ã‚ŒãŸåˆ¶ç´„(README)ã«é•åã—ã¦ã„ã‚‹å ´åˆã‚’æŒ‡ã™
        
        error_code = 0 : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å•é¡Œ
        error_code = 1 : éƒ¨å±‹ã®å‚åŠ æ¨©é™ãŒãªããªã£ãŸå ´åˆ 
        error_code = 2 : éƒ¨å±‹ã®å‚åŠ æ¨©é™ã‚‚ã¨ã‹ã‚‰ãªã„å ´åˆ
        error_code = 3 : ã‚µãƒ¼ãƒãƒ¼ã®è² è·ãŒå¤§ãã„å ´åˆ
        
    */
    socket.on('catch_error_when_send_request-' + Client_json_data.ChatRoomName , function(error_code){
        if(error_code == 3){
            document.getElementById('LatestMessageArea').style.color = color_for_x(0);
            document.getElementById('LatestMessageArea').innerText = "ğŸ”»ã‚µãƒ¼ãƒãƒ¼ãŒæ··ã¿åˆã£ã¦ãŠã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚ğŸ”»";
        }
        
    })
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
</script>










