<!doctype html>
<html lang="ja">
    <link rel="stylesheet" media="screen and (max-width:768px)" href="./../static/css/ChatRoom_SmartPhone.css">
    <link rel="stylesheet" media="screen and (min-width:769px)" href="./../static/css/ChatRoom_PC.css">
    <link rel = "stylesheet" href = "./../static/css/common.css">
    <link rel="icon" href="./../static/image/favicon.ico">
    
    <script src = "./../static/javascript/client.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha384-ZCmVL/dTQHh41JxtZe73klDRFSJ/zixGCGt5lhnLQGjSWfAnlXSg+GSnRACaK5lc" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
    
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0">


    <title>{{chatRoomName_JP}}</title>
    </head>
    
    
   <!--èƒŒæ™¯(imageã®ç›¸å¯¾ãƒ‘ã‚¹ã¯ChatRoom.htmlãŒã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰)-->
    <div class = "BackGround_basic" id = "BackGroundTag" style = "background-image:url(./../static/image/background_green1.png);"></div>
    
    
    
    
    <!--
        éƒ¨å±‹ã®æƒ…å ±ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼
    -->
    <div class = "ChatRoomMenu_bar" id = "ChatRoomMenu_bar">
        
            
        
        <!--ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹-->
        <span onclick = "return_to_TOPPAGE()" style = "font-size:15px;">&ensp;&ensp;â¬…ï¸ï¸&ensp;&ensp;</span> 
        
        <!--éƒ¨å±‹ã®æ¥ç¶šã®å®‰å®šæ€§-->
        <span>&ensp;&ensp;æ¥ç¶šã®å®‰å®šæ€§ : <span id = "ConnectionStabilityTag"> </span></span>
            
         
        <!--ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã®èª¬æ˜-->
        <span class = "ChatRoomExplanation_Button" onclick = "SetHTML('ChatRoomExplanation')" style = "float:right; margin-right:5%; top:3px;"> i </span>
        <span style = "clear:right;" name = "floatã‚’æ¶ˆã™ãŸã‚ã®div" ></span>
        
        
        
        
        <!--ãƒ«ãƒ¼ãƒ åã€€and ã“ã“ã‚’æŠ¼ã™ã¨ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«-->
        <div style = "text-align:center;"><div style = "font-size:12px; margin-top:2px;margin-bottom:2px;" onclick="scroll_to_TOP()">{{chatRoomName_JP}}</div></div>
        
        
        
        <!--ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã‚„æ³¨æ„æ›¸ã-->
        
        
        <!--éƒ¨å±‹ã®èª¬æ˜-->
        <div class = "ChatRoomExplanation"  id = "ChatRoomExplanation"  style = "display:none;">
            <br>
            <div style = "text-align:center;"><h_big>{{chatRoomName_JP}}</h_big></div>
            <div style = "text-align:center;">{{chatRoomExplanation}}</div>    
            <br>
            <Orange>
                æ³¨æ„ï¼š
            </Orange>
                <br>ãƒ»ä»–è€…ã¸ã®èª¹è¬—ä¸­å‚·ã¯ç¦æ­¢ï¼
                <br>ãƒ»å€‹äººæƒ…å ±ã®æ‰±ã„ã«ã¯ã”æ³¨æ„ã‚’ï¼
            <div style = "text-align:center;"><button class = 'nomal_button' onclick = "HideHTML('ChatRoomExplanation')">CLOSE</button></div>
            <br>
        </div>
        
        
        
        
        
    </div>


    <br>
    <br>
    <br>
    
    
    
    
    <!--ãƒ‡ã‚«ã‚ã®è¦ªè¦ç´ ã€‚-->
    <div class = 'Inner' , id = 'Inner' style = "background-color:rgba(255,255,255,0);">

        <br>
        <!--ãƒãƒ£ãƒƒãƒˆæ¬„-->
        <div class = 'ChatArea'  id = 'ChatArea'>
            
            
        </div>
        
        <!--æ–°ç€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ¥ãŸæ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³-->
        <div class = "NewMessageSign" id = "NewMessageSign" ></div>
        

        
        
        
    </div>
    


    <!--ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠ-->
    <!-- ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®valueãŒãã®ã¾ã¾ã‚³ãƒãƒ³ãƒ‰ã«ãªã£ã¦ãŠã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«éš ã—ã‚³ãƒãƒ³ãƒ‰ã‚’ä»˜ã‘åŠ ãˆã‚‹ -->
    <div class = "SelectMessageOption" id = "SelectMessageOption" style = "display:none;">
        <div id = "SelectMessageOption_Close" onclick = "HideHTML('SelectMessageOption')"  style = " border-radius:15px;width:100%;background-color:red;text-align:center;color:white;">CLOSE</div>
        
        ãƒ†ã‚­ã‚¹ãƒˆã®è‰²:
        
        <!--valueãŒãã®ã¾ã¾éš ã—ã‚³ãƒãƒ³ãƒ‰ã«ãªã£ã¦ã„ã‚‹-->
        <br>&ensp;&ensp;<label><input type="radio" name="MessageColor_SelectRadioButton" value="Color-0:" checked>BLACK</label>
        <br>&ensp;&ensp;<label><input type="radio" name="MessageColor_SelectRadioButton" value="Color-1:" >RED</label>
        <br>&ensp;&ensp;<label><input type="radio" name="MessageColor_SelectRadioButton" value="Color-2:" >BLUE</label>
        <br>&ensp;&ensp;<label><input type="radio" name="MessageColor_SelectRadioButton" value="Color-3:" >PINK</label>
        
        <br>
        <br>
        
        ãƒ¦ãƒ¼ã‚¶ãƒ¼å:
        <br>&ensp;&ensp;<label><input type="radio" name="MessageUserName_SelectRadioButton" value="" checked>ãƒ‘ãƒ³ãƒ”ãƒ¼</label>
        <br>&ensp;&ensp;<label><input type="radio" name="MessageUserName_SelectRadioButton" value="NokonoKotlin:" >ã‚µã‚¯ãƒ©</label>


        
            
        
        
    </div>
    
    
    
    <!--ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ã¨é€ä¿¡é–¢é€£-->
    <div id = "submit_set" class = "message_submit_set" >
        
        <!--æœ€æ–°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„æƒ…å ±ã‚’è¡¨ç¤º and ã“ã“ã‚’æŠ¼ã™ã¨è‡ªå‹•ã§ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« -->
        <span id = 'LatestMessageArea' class = "LatestMessageArea" style = "font-size:12px;width:100%;" onclick = "scroll_to_BOTTOM()">ğŸ”»now:</span>
        

        
        
        <!--è¶³è·¡ã‚’ã¤ã‘ã‚‹-->
        <div onclick = 'send_FootPrints()' class = 'FootPrints_button' id = "send_FootPrints" style = "float:left; margin-left:4%;">ğŸ¾</div>
        

        
        
        <!--éš ã—ã‚³ãƒãƒ³ãƒ‰(ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚ªãƒ—ã‚·ãƒ§ãƒ³)é¸æŠ-->
        <div onclick="SetHTML('SelectMessageOption')" style = "float:left; margin-left:4%; font-size:17px; ">âš™</div>
        


        <!--é€ä¿¡ãƒœãƒƒã‚¯ã‚¹-->
        <div onclick = "send_message()" class="SendMessageButton" style = "float:right; margin-right:4%;">  </div>
        <textarea class= "MessageBox" id="MessageBox"
            placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›"
            oninput="textAreaHeightSet(this)"
            onchange="textAreaHeightSet(this)"
            style = "height:24px; float:right; margin-right:10px;" 
        ></textarea>
        
        
        
    </div>
    
    
    
    
    
    
    



        
    
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>

    


    
</html>





<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->

<!--==============================================ã“ã“ã‹ã‚‰javascript========================================================--><!--==============================================ã“ã“ã‹ã‚‰javascript========================================================-->








<!--=========================================================================================================================-->
<!--HTMLè¦ç´ ã®åˆæœŸåŒ–=========================================================================================================-->
<!--=========================================================================================================================-->




<script>
    
    /*
        HTMLå†…ã®é…ç½®ã‚„åˆæœŸåŒ–ã‚’è¡Œã„ã¾ã™ã€‚
    */
            
    var WindowHeight = window.innerHeight;
    var WindowWidth = window.innerWidth;


    //HTMLè¦ç´ ã‚’ã‚»ãƒƒãƒˆ
    function SetHTML(id){
        document.getElementById(id).style.display = 'block';
        
    }
    
    
    //HTMLè¦ç´ ã‚’å‰Šé™¤ï¼ˆè¦‹ãˆãªãã™ã‚‹ï¼‰
    function HideHTML(id){
        document.getElementById(id).style.display = 'none';
    }
    
    
        
    function init_HTML(){
        
        SetHTML('submit_set')
        SetHTML('ChatArea')
        SetHTML('LatestMessageArea')
        
        
        
    }
    


    /*
    ãƒ‡ãƒãƒƒã‚°ã‚ˆã†
    */
    function reload(){
        console.log("reloaded");
        location.reload(true);
    }    
    
    
    
    /*
        ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…¥åŠ›ã‚¨ãƒªã‚¢ã®æ”¹è¡Œã®å‡¦ç†
    */
    function textAreaHeightSet(argObj){

        // ä¸€æ—¦ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã‚’å°ã•ãã—ã¦ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆç¸¦ã®é•·ã•ã‚’å–å¾—ï¼‰
        argObj.style.height = "10px";
        var wSclollHeight = parseInt(argObj.scrollHeight);
        // 1è¡Œã®é•·ã•ã‚’å–å¾—ã™ã‚‹
        var wLineH = parseInt(argObj.style.lineHeight.replace(/px/, ''));
        // æœ€ä½2è¡Œã®è¡¨ç¤ºã‚¨ãƒªã‚¢ã«ã™ã‚‹
        if(wSclollHeight < (wLineH * 2)){wSclollHeight=(wLineH * 2);}
        // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®é«˜ã•ã‚’è¨­å®šã™ã‚‹
        if(wSclollHeight <= 100)argObj.style.height = wSclollHeight + "px";
        else argObj.style.height = 100 + "px";
    }
        
    
    

    
    function return_to_TOPPAGE(){
        window.location = "/";
    }
    
    
    //windowãƒ¡ã‚½ãƒƒãƒ‰ã§TOPã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    function scroll_to_TOP(){
        window.scrollTo({
            top:0,
            left:0,
            behavior: 'smooth'
        });
    }
    
    
    function scroll_to_BOTTOM(){
        var element = document.documentElement;
        var bottom = element.scrollHeight - element.clientHeight;
        window.scroll(0, bottom);
    }
    
    
    
    
    
    
    
    init_HTML();
    
    //alert("ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ä½ç½®æƒ…å ±ã‚’ä½¿ã„ã¾ã™ã€‚\n ä½ç½®æƒ…å ±è¨­å®šã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚")

    window.onresize = init_HTML;
    

    
</script>











<!--=========================================================================================================================-->
<!--æ±ç”¨çš„ãªé–¢æ•°ãŸã¡==========================================================================================================-->
<!--=========================================================================================================================-->






<script>
    
    
    
        
    //æ•°å€¤ï¼šxã«å¯¾å¿œã™ã‚‹è‰²(cssã«ãŠã‘ã‚‹è‰²ã‚’è¡¨ã™æ–‡å­—åˆ—)ã‚’è¿”ã™é–¢æ•°ã€‚Color-x:ã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†ã§ä½¿ã†
    function color_for_x(x){
        if(x == 0)return "black";
        else if(x == 1)return "red";
        else if(x == 2)return "blue";
        else if(x == 3)return "pink";
        else return "black";
    }
    
    
    
    
    //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¹ãå‡ºã—ã‚’æŠ¼ã™ã¨ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹(å¼•æ•°ã«event)
    function DisplayMessageInfo(e){
        alert(e.target.id)
    }
</script>
















<!--=========================================================================================================================-->
<!--ã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã—ã¦ã€ãƒãƒ£ãƒƒãƒˆã®æƒ…å ±ã‚’å–ã£ã¦ããŸã‚Šã€ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã®æƒ…å ±å–å¾—ã‚„æ›´æ–°ã‚’è¡Œã†==========================================================================================================-->
<!--=========================================================================================================================-->












<script>



    /*
        ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚„ã‚Šå–ã‚Šã‚’è¡Œã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
        ã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã—ã¾ã™ã€‚
    */
    
    
    
    //ãƒ¡ã‚¤ãƒ³å‡¦ç†åŠã³å¤‰æ•°å®£è¨€
    //ãƒ¡ã‚¤ãƒ³å‡¦ç†åŠã³å¤‰æ•°å®£è¨€
    //ãƒ¡ã‚¤ãƒ³å‡¦ç†åŠã³å¤‰æ•°å®£è¨€
    //ãƒ¡ã‚¤ãƒ³å‡¦ç†åŠã³å¤‰æ•°å®£è¨€




    
    //é€šä¿¡
    var socket = io();
    
    
    //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æœ€å¤§é•·
    const MessageLengthLimit = 127;
    //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡Œæ•°ã®æœ€å¤§å€¤
    const MessageHeightLimit = 10;
    
    //éƒ¨å±‹ã®ä¸­å¿ƒã®çµŒåº¦ã€ç·¯åº¦ã€åŠå¾„
    const ChatRoom_Longitude = {{chatRoomLongitude | tojson}};
    const ChatRoom_Latitude = {{chatRoomLatitude | tojson}};
    const ChatRoom_Radius = {{chatRoomRadius | tojson}};

    
    
    /*
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ(ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ )ã®ãƒ‡ãƒ¼ã‚¿    
        ã‚µãƒ¼ãƒãƒ¼ã¨é€šä¿¡ã™ã‚‹ã¨ãã‚‚ã€ã“ã‚Œã‚’ä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹
        éšæ™‚æ›´æ–°ã™ã‚‹
        
        ChatRoomName : ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‚åŠ ã—ã¦ã„ã‚‹éƒ¨å±‹å
        message_text : é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸(é€ä¿¡æ™‚ã®ã¿å‚ç…§)ã€‚ã¾ãŸã€å‰å›é€ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦ä¿å­˜ã—ã¦ãŠã
        LatestMessageTimeStamp : ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒãƒ£ãƒƒãƒˆæ¬„ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æœ€æ–°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
        ClientLongitude : ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç¾åœ¨åœ°ã®çµŒåº¦
        ClientLatitude : ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç¾åœ¨åœ°ã®ç·¯åº¦
        
        
            
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯ã“ã“ã§ç®¡ç†ã™ã‚‹ã®ã§ã€ã¡ã‚ƒã‚“ã¨ç®¡ç†ã€æ›´æ–°ã™ã‚‹ã“ã¨ãŒå¤§äº‹
            
    */
    var Client_json_data = {
        
        ChatRoomName :  {{chatRoomName | tojson}} , 
        
        message_text : 'NULL' ,
        
        LatestMessageTimeStamp : -1 ,
        
        ClientLongitude : -1 ,
        
        ClientLatitude : -1 ,
        
        ClientUserType : {{usrType | tojson}}
        
    }




    
    
    get_ChatData_from_server();
    //TimestampãŒ-1(åˆæœŸåŒ–å€¤ã§ã‚ã‚‹ã‹ãã‚Šã“ã‚Œã¾ã§ã®ãƒãƒ£ãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼ã«è¦æ±‚ã™ã‚‹(ãƒã‚°ã§ã¡ã‚ƒã‚“ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚Œãªã„å¯èƒ½æ€§ã‚‚ã‚ã‚‹ã‹ã‚‰)
    interval_UserPosition_update =  setInterval(get_ChatData_from_server  , 3000);

    
    
    //æœ€åˆã«ç¾åœ¨åœ°ã®ä½ç½®æƒ…å ±ã‚’å–å¾—and,ãã®ä½ç½®æƒ…å ±ãŒã“ã®éƒ¨å±‹ã§æœ‰åŠ¹ã‹ãƒã‚§ãƒƒã‚¯
    get_UserPosition();
    reload_ChatRoom();
    /*
        ä»¥é™ã¯ä¸€å®šæ™‚é–“æ¯ã«ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
        (ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã¯ãªãã€å‚åŠ è€…æ¨©é™ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã ã‘)
        HTMLã®è¦ç´ ã‚‚æ›´æ–°ã—ãŸã‚Šã™ã‚‹ã®ã§å¿˜ã‚Œãšã«
    */
    interval_UserPosition_update =  setInterval(reload_ChatRoom  , 3000);
    
    







    //====================================================================================================================================================================================
    //====================================================================================================================================================================================
    //=====================================================é–¢æ•°ãŸã¡====================================================================================================
    //====================================================================================================================================================================================







    /*
        æœ€åˆã«ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ã‚’ã“ã‚Œã¾ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§æ›´æ–°
        
        ã‚µãƒ¼ãƒãƒ¼ã«ã¯
        ç¾åœ¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¨ã€    
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¥ç¶šã—ã¦ã„ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ åã‚’jsonã§é€ä¿¡ã™ã‚‹
    */
    function get_ChatData_from_server(){
        //åˆæœŸçŠ¶æ…‹ãªã‚‰
        if(Client_json_data.LatestMessageTimeStamp == -1)socket.emit('return_updated_data' , Client_json_data);
        
    }
    
    
    




    /*
        ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã‚’å®šæœŸçš„ã«ãƒªãƒ­ãƒ¼ãƒ‰ã€‚ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã‚’æ›´æ–°ã—ã€ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒãªããªã£ã¦ã„ã‚Œã°ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã™
        ã‚³ãƒ¼ãƒ‰è¦ç´„ãªã®ã§ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ1ã¤ã§ã‚‚jsonãƒ•ã‚¡ã‚¤ãƒ«ã§é€šä¿¡ã‚’è¡Œã„ã¾ã™
        
        (ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ã§ã¯ãªãã€å‚åŠ è€…æ¨©é™ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã ã‘)
    */
    function reload_ChatRoom(){
        get_UserPosition();
        
         //ã†ã¾ãä½ç½®æƒ…å ±ã‚’å–å¾—ã§ããªã‹ã£ãŸå ´åˆã€å¾…æ©Ÿ
        if(Client_json_data.ClientLongitude == -1 || Client_json_data.ClientLongitude == -1)return false;
        
        
        socket.emit('reload_Client_ChatRoom' , Client_json_data);
        
        update_ConnectionStabilityTag();
        
        
        return true;
    }
    
    
    
    
    
    
    /*
        ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã®æƒ…å ±æ¬„ã®ã€æ¥ç¶šã®å®‰å®šæ€§ã®ç®‡æ‰€ã‚’æ›´æ–°(æ›¸ãæ›ãˆ)ã™ã‚‹
    */
    function update_ConnectionStabilityTag(){
        var DistanceFromCenterOfTheRoom = realDistance(
            Client_json_data.ClientLongitude , Client_json_data.ClientLatitude ,ChatRoom_Longitude , ChatRoom_Latitude);
        
        var StabilityRate = Math.floor(100*(ChatRoom_Radius - DistanceFromCenterOfTheRoom)/ChatRoom_Radius);
        var StabilityText = "NULL";
        
        if(StabilityRate >= 90)StabilityText = "è¶…å®‰å®š(" + StabilityRate + "%)";
        else if(StabilityRate >= 70)StabilityText = "å®‰å®š(" + StabilityRate + "%)";
        else if(StabilityRate >= 50)StabilityText = "é€šå¸¸(" + StabilityRate + "%)";
        else if(StabilityRate >= 25)StabilityText = "å°‘ã—ä¸å®‰å®š(" + StabilityRate + "%)";
        else if(StabilityRate >= 1)StabilityText = "ä¸å®‰å®š(" + StabilityRate + "%)";
        else StabilityText = "æ¥ç¶šåˆ‡ã‚Œ(" + StabilityRate + "%)";
        
        document.getElementById('ConnectionStabilityTag').innerText = StabilityText;
        
    }
    
    







        
    /*
        è‡ªåˆ†ã®ä½ç½®æƒ…å ±ã‚’å–å¾—,æ›´æ–°
    */
    function get_UserPosition(){
    //Geolocation APIã«å¯¾å¿œã—ã¦ã„ã‚‹å ´åˆ
        if(navigator.geolocation ){
            navigator.geolocation.getCurrentPosition(function(position){
                Client_json_data.ClientLatitude = position.coords.latitude;//ç·¯åº¦
                Client_json_data.ClientLongitude = position.coords.longitude;//çµŒåº¦
               });
        }else{
            alert("ä½ç½®æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ä½ç½®æƒ…å ±è¨­å®šã‚’å†ç¢ºèªã—ã¦ãã ã•ã„")
        }
    }












    
    
    /*
        MessageBoxã«å…¥ã£ã¦ã„ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ã£ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«çªã£è¾¼ã‚€
        ã‚µãƒ¼ãƒãƒ¼ã«ã¯
        é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨,
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ¥ç¶šã—ã¦ã„ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ åã‚’jsonã§é€ä¿¡ã™ã‚‹
        
        ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã‹ã‚‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å—ã‘å–ã‚Šã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«éš ã—ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦ä»˜ä¸ã™ã‚‹
    */
    function send_message(){
        
        
        var message = document.getElementById('MessageBox').value;
        
        
        
        if(message.length <= 0 ){
            //ä½•ã‚‚å…¥åŠ›ãŒãªã‹ã£ãŸ
            return 0;
        }
        
        if(message.length > MessageLengthLimit || message.split('\n').length > MessageHeightLimit){
            //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé•·ã™ãã¦ã‚‚ã ã‚
            document.getElementById('LatestMessageArea').innerText = ' info : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé•·ã™ãã¾ã™ã€‚ï¼‘ï¼’ï¼—æ–‡å­—ã€10è¡Œä»¥å†…ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚' 
            return 0;
        }

        
        
        
        //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ 
        var MessageOption_Color = document.getElementsByName("MessageColor_SelectRadioButton");//ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è‰²ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®ãƒªã‚¹ãƒˆ
        for(var ind = 0 ; ind < MessageOption_Color.length; ind++){
            if(MessageOption_Color[ind].checked){
                message = MessageOption_Color[ind].value + message;//ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®valueãŒãã®ã¾ã¾éš ã—ã‚³ãƒãƒ³ãƒ‰ã«ãªã£ã¦ã„ã‚‹
                break;
            }
        }
        var MessageOption_UserName = document.getElementsByName("MessageUserName_SelectRadioButton");//é€ä¿¡è€…åã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®ãƒªã‚¹ãƒˆ
        for(var ind = 0 ; ind < MessageOption_UserName.length; ind++){
            if(MessageOption_UserName[ind].checked){
                message = MessageOption_UserName[ind].value + message;//ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®valueãŒãã®ã¾ã¾éš ã—ã‚³ãƒãƒ³ãƒ‰ã«ãªã£ã¦ã„ã‚‹
                break;
            }
        }
        
        
            
        if( message == Client_json_data.message_text ){
            //å‰å›è‡ªåˆ†ãŒé€ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨åŒã˜ãªã‚‰é€ä¿¡ã—ãªã„
            //ãã—ã¦ã€ãã®æ—¨ã‚’æœ€æ–°ã®æƒ…å ±æ¬„ã«è¡¨ç¤ºã™ã‚‹
            document.getElementById('LatestMessageArea').innerText = 'ğŸ”» info : ã‚ãªãŸã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã§ãã¾ã›ã‚“ã§ã—ãŸ^o^ã€‚ğŸ”»' 
            document.getElementById('LatestMessageArea').style.color = color_for_x(0);
        
            return 0;
        }
        
        
        
        
        
        
        
        
        
        
        //é€ä¿¡ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
        Client_json_data.message_text = message;

        socket.emit('send_message', Client_json_data );
        
        document.getElementById('MessageBox').value = "";
        document.getElementById('MessageBox').style.height = "24px"; 
        
        return 1;
    }
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    /*
        ã‚ã—ã‚ã¨ã‚’é€ä¿¡
    */
    function send_FootPrints(){
        document.getElementById('send_FootPrints').onclick = "";
        socket.emit('send_FootPrints_for_database' , Client_json_data)
        alert("è¶³è·¡ã®é€ä¿¡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼")
        
    }
    
    
    
    
    
    
    
    
    
    /*
        Likeã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡
        ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾å¿œã—ãŸãƒœã‚¿ãƒ³ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚‹
        ãƒœã‚¿ãƒ³ã‚¿ã‚°ã®ã®idãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ï¼ˆã‚µãƒ¼ãƒãƒ¼ã«ãŠã‘ã‚‹ï¼‰ã‚°ãƒ­ãƒ¼ãƒãƒ«IDã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã®ã§ã€idã‚’ãã®ã¾ã¾é€ä¿¡ã™ã‚‹
        é€ä¿¡ã™ã‚‹jsonãƒ‡ãƒ¼ã‚¿ã¯ã€
        {
            MessageGlobalID :
            ChatRoomName :
            ClientLongitude : 
            ClientLatitude :
        }
    */
    function send_Like(e){
        var json_data_for_server = {
            ChatRoomName : Client_json_data.ChatRoomName , 
            MessageGlobalID : e.target.id , 
            ClientLongitude : Client_json_data.ClientLongitude,
            ClientLatitude : Client_json_data.ClientLatitude
        }
        socket.emit('send_Like_for_database',json_data_for_server);
        document.getElementById('' + e.target.id).onclick = "";
    }
    
    
    
    
    
    
    
    
 
    
    

    
    
    
    /*    
        ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ã‚‰ã‚Œã¦ãã‚‹ã®ã§ã€Client_json_dataã‚„ãƒãƒ£ãƒƒãƒˆæ¬„ã‚’æ›´æ–°
        
        
        ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®æ›´æ–°(ä¸€ã¤ãšã¤textãŒé€ã‚‰ã‚Œã¦ãã‚‹ã®ã§ã€é †æ¬¡è¿½åŠ )
          'update_ChatArea-'+ChatRoomName_now ã¨ã‚ã‚‹ãŒã€
          ã“ã‚Œã¯ä»Šç¾åœ¨å‚åŠ ã—ã¦ã„ã‚‹ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã®çª“å£ã§ã‚ã‚‹ã“ã¨ã‚’è¡¨ã™
          (+ChatRoomName_nowãŒãªã‘ã‚Œã°ã€ä»–ã®ãƒ«ãƒ¼ãƒ ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚å—ã‘å–ã£ã¦ã—ã¾ã†ã‹ã‚‰)
          
          
          éš ã—ã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†ã€
          floatã«ã‚ˆã‚‹æ„å›³ã—ãªã„ä½ç½®ã‚ºãƒ¬ã®å¯¾å¿œ(æ”¹è¡Œå…¼Likeãƒœã‚¿ãƒ³ã«clearã‚’ä¹—ã›ã¦å¼·åˆ¶çš„ã«æ”¹è¡Œ)
          æœ€æ–°ã®æƒ…å ±æ¬„ã®æ›´æ–°
          
    */
    socket.on('update_ChatArea-' + Client_json_data.ChatRoomName , function(json_data) {
        
        Client_json_data.LatestMessageTimeStamp = json_data.TimeStamp;
        
        
        var ChatAreaElement = document.getElementById('ChatArea');
        
        //ãƒ¦ãƒ¼ã‚¶ãƒ¼å
        var userName = 'ãƒ‘ãƒ³ãƒ”ãƒ¼'
        if(json_data.Type == 1)userName = 'Admin'
        else if(json_data.Type == 3)userName = 'ã‚µã‚¯ãƒ©'
        
        
        //ãƒ†ã‚­ã‚¹ãƒˆã®è‰²(messageã®éš ã—ã‚³ãƒãƒ³ãƒ‰ . Color-x:ã§æŒ‡å®š) x = 0 -> é»’; ä»–ã¯REDMEå‚ç…§
        var textColor = 0;
        //å—ç†ã•ã‚Œã‚‹Colorã‚³ãƒãƒ³ãƒ‰ã®é›†åˆ(in æ¼”ç®—å­ã§Keyã®å­˜åœ¨ã‚’åˆ¤å®šå¯èƒ½)
        var ColorOK =  {"Color-0:":true ,"Color-1:":true,"Color-2:":true ,"Color-3:":true};

        
        
        //éš ã—ã‚³ãƒãƒ³ãƒ‰å‡¦ç†(å…¨éƒ¨)
        while(1){
            var isCommandExist = false;
            
            
            if(json_data.Text.substring(0,String("NokonoKotlin:").length) == "NokonoKotlin:"){
                //æœ€åˆã®length(NokonoKotlin:)æ–‡å­—ç›®ã¾ã§ãŒ NokonoKotlin:ã‚³ãƒãƒ³ãƒ‰ã¨ä¸€è‡´
                userName = 'ã‚µã‚¯ãƒ©';        
                json_data.Text = json_data.Text.substring(String("NokonoKotlin:").length , json_data.Text.length);//ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ‡ã‚Šå–ã‚Š
                isCommandExist = true;
                
            }else if(json_data.Text.substring(0,String("Color-x:").length) in ColorOK){
                //æœ€åˆã®length(NokonoKotlin:)æ–‡å­—ç›®ã¾ã§ãŒ æŒ‡å®šã•ã‚ŒãŸColor-xã‚³ãƒãƒ³ãƒ‰ã¨ä¸€è‡´
                textColor = parseInt(json_data.Text[6]);//intã§æ‰±ã„ãŸã„ã®ã§
                json_data.Text = json_data.Text.substring(String("Color-x:").length , json_data.Text.length);//ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ‡ã‚Šå–ã‚Š
                isCommandExist = true;
                console.log(textColor)
            }
            
            
            //ã‚‚ã†ã‚³ãƒãƒ³ãƒ‰ãŒãªããªã£ãŸã‚‰
            if(isCommandExist == false){
                break;
            }
        }
           
        
        
        //è¡¨ç¤ºã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®HTMLã‚¿ã‚°(é€ä¿¡è€…ã«ã‚ˆã£ã¦å·¦å³ã«åˆ†ã‘ã‚‹ . nameã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æƒ…å ±ã‚’æ ¼ç´)
        var ChatMessageTag;
        //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®cssã‚¯ãƒ©ã‚¹
        var ChatMessageCssClass;
        
        // æ”¹è¡Œ å…¼ Likeãƒœã‚¿ãƒ³ã®HTMLã‚¿ã‚° (æ”¹è¡Œã¯ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®cssã®floatã‚’æ¶ˆã™ãŸã‚ã«ã‚ã‚‹ã®ã§ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‘ãã«ã‚ˆã£ã¦clearã®æ–¹å‘ãŒå¤‰ã‚ã‚‹)
        var EndLineandLikesTag;
        
        
        if(json_data.Type == 2){
            //é€ä¿¡è€…ãŒè‡ªåˆ†ã®å ´åˆã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å³å´ã«è¡¨ç¤º
            
            ChatMessageTag = "<div class = 'ChatMessage_right' id = '"
             + "Message send by " + userName + " : "+json_data.Date + " : id - " + json_data.MessageGlobalID 
            +"' onclick = 'DisplayMessageInfo(event)'></div>";
            
            //å³
            ChatMessageCssClass = 'ChatMessage_right';
            
            //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®cssã§float:right;ã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®divãŒæ”¹è¡Œã•ã‚Œãªã„ã®ã§ã€clear:right;ã—ã¦ å¼·åˆ¶çš„ã«æ”¹è¡Œã‚’è¿½åŠ 
            EndLineandLikesTag =   "<div style = 'width:100%; clear:right;'></div>"; //è‡ªåˆ†ãŒé€ä¿¡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«Likeãƒœã‚¿ãƒ³ã¯ãªã„
            
        }else{
            //è‡ªåˆ†ä»¥å¤–ã®å ´åˆã€å·¦ã«è¡¨ç¤º
        
            ChatMessageTag = "<div class = 'ChatMessage_left' id = '"
             + "Message send by " + userName + " : "+json_data.Date + " : id - " + json_data.MessageGlobalID 
            +"' onclick = 'DisplayMessageInfo(event)'></div>";
            
            //å·¦
            ChatMessageCssClass = 'ChatMessage_left';
            
            /*
                Likeãƒœã‚¿ãƒ³ã‚¿ã‚°ã«ã¯ id ã« ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å—ã‘å–ã£ãŸã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®IDã‚’å…¥ã‚Œã¦ã€ ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸæ™‚ã«IDã‚’ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
                 == ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æŒã¤ã‚µãƒ¼ãƒãƒ¼ã«ãŠã‘ã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«IDã¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‡¦ç†ã§å‰²ã‚ŠæŒ¯ã‚‹IDã¯åŒã˜
                 æ”¹è¡Œã®å½¹å‰²ã‚‚æŒã£ã¦ã„ã‚‹ãŸã‚ã€clear:left;ã™ã‚‹ã“ã¨ã§float:left;ã‚’æ¶ˆã™
            */
            
            EndLineandLikesTag = "<div style = 'width:100%; clear:left; margin-left: 4%;'>"
            + "By : "
            + userName
            +"<span  onclick = 'send_Like(event)' id = '"
            + json_data.MessageGlobalID
            + "' > "
            +" &ensp; â¤ï¸ " 
            +  json_data.Likes 
            + "</span> "
            
            + "</div>";
        }
        
        //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚°ã‚’ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ã«è¿½åŠ (ã¨ã‚Šã‚ãˆãšã‚¿ã‚°ã ã‘è¿½åŠ ã—ã¦ã€å¾Œã§ä¸­èº«ã‚’)
        ChatAreaElement.insertAdjacentHTML('beforeend', ChatMessageTag);
        
        
        //ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚°ã®ä¸€è¦§
        var ChatMessageList = document.getElementsByClassName(ChatMessageCssClass);
        var index_end = ChatMessageList.length - 1;//ã•ã£ãè¿½åŠ ã—ãŸã‚¿ã‚°ã®index
        
            
        if(index_end >= 0){
            //æœ€å¾Œã®ã‚¿ã‚°ãŒä»Šè¿½åŠ ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã®ã§ã€ãã“ã«å†…å®¹ã‚’æ›¸ãè¾¼ã‚€
            ChatMessageList[index_end].innerText = json_data.Text;
            
            //Color-x:ã‚³ãƒãƒ³ãƒ‰ã®è‰²ã«å¤‰ãˆã‚‹
            ChatMessageList[index_end].style.color = color_for_x(textColor);
            
            console.log(color_for_x(textColor))
            
            
        }
        
        
        
        
        //æœ€æ–°ã®æƒ…å ±æ¬„ã‚’æ›´æ–°(è¡Œæ•°ã‚„æ–‡å­—æ•°ãŒå¤šã„ã‚‚ã®ã¯è¡¨ç¤ºã—ãªã„)
        if(json_data.Text.split('\n').length > 2 || json_data.Text.length >=60){
            document.getElementById('LatestMessageArea').style.color = color_for_x(0);
            document.getElementById('LatestMessageArea').innerText = "ğŸ”»æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™ã€‚ğŸ”»";
        }else{
            document.getElementById('LatestMessageArea').innerText 
            = 'ğŸ”» now : '  +userName + '  :  ' +  json_data.Textã€€+ "ğŸ”»"  ;
            
            //Color-x:ã‚³ãƒãƒ³ãƒ‰ã®è‰²ã«å¤‰ãˆã‚‹
            document.getElementById('LatestMessageArea').style.color = color_for_x(textColor);

        }
        
        
        
        //æ”¹è¡Œ å…¼ Likeãƒœã‚¿ãƒ³ã‚¿ã‚°ã‚’è¿½åŠ ã€‚ã“ã“ã§floatã‚’clearã™ã‚‹
        ChatAreaElement.insertAdjacentHTML('beforeend', EndLineandLikesTag);
        
        
    });
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    /*
        ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ åˆ©ç”¨ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸæ™‚ç”¨ã®ã‚¨ãƒ©ãƒ¼çª“å£
        ã‚¨ãƒ©ãƒ¼ã¨ã¯ã‚µãƒ¼ãƒãƒ¼ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ãªã‚¨ãƒ©ãƒ¼ã§ã¯ãªãã€ã‚¢ãƒ—ãƒªã§å®šã‚ã‚‰ã‚ŒãŸåˆ¶ç´„(README)ã«é•åã—ã¦ã„ã‚‹å ´åˆã‚’æŒ‡ã™
        
        error_code = 0 : ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å•é¡Œ
        error_code = 1 : éƒ¨å±‹ã®å‚åŠ æ¨©é™ãŒãªããªã£ãŸå ´åˆ 
        error_code = 2 : éƒ¨å±‹ã®å‚åŠ æ¨©é™ã‚‚ã¨ã‹ã‚‰ãªã„å ´åˆ
        error_code = 3 : ã‚µãƒ¼ãƒãƒ¼ã®è² è·ãŒå¤§ãã„å ´åˆ
        
    */
    socket.on('catch_error_when_send_request-' + Client_json_data.ChatRoomName , function(error_code){
        
        
        //ã‚¹ãƒ‘ãƒ å¯¾ç­–ã®ãŸã‚ã€ç›´å‰ã®æ–‡ç« ã¨åŒã˜ã€ã¾ãŸã¯ç·¨é›†è·é›¢ãŒè¿‘ã„æ–‡ç« ã¯å¼¾ã    
        if(error_code == 0){
            alert("ã‚¹ãƒ‘ãƒ å¯¾ç­–ã®ãŸã‚ã€ç›´å‰ã®æ–‡ç« ã¨åŒã˜ã€ã¾ãŸã¯ç·¨é›†è·é›¢ãŒè¿‘ã„æ–‡ç« ã¯é€ä¿¡ã§ãã¾ã›ã‚“:(");
            
        }else if(error_code == 1){
            alert("ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã®å‚åŠ æ¨©é™ãŒãªããªã‚Šã¾ã—ãŸã€‚\nãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã£ã¦éƒ¨å±‹ã‚’é¸æŠã—ç›´ã—ã¦ãã ã•ã„ã—ã¾ã™ã€‚")
            return_to_TOPPAGE();
             
             
        }else if(error_code == 2){
            alert("ã“ã®ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã§ã®æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚")
            return_to_TOPPAGE();
        }else if(error_code == 3){
            document.getElementById('LatestMessageArea').style.color = color_for_x(0);
            document.getElementById('LatestMessageArea').innerText = "ğŸ”»ã‚µãƒ¼ãƒãƒ¼ãŒæ··ã¿åˆã£ã¦ãŠã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸã€‚ğŸ”»";
        }
        
    })
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
</script>










